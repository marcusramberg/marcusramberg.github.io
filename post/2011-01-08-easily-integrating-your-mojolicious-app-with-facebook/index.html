<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content><meta name=generator content="Hugo 0.72.0"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type=text/css><link rel=alternate href=/index.xml type=application/rss+xml title="Suburban Nerd"><title>Easily integrating your Mojolicious app with Facebook. - Suburban Nerd</title></head><body><header><div class="container clearfix"><a class=path href=http://marcus.nordaaker.com>[Suburban Nerd]</a>
<span class=caret># _</span><div class=right></div></div></header><div class=container><main role=main class=article><article class=single itemscope itemtype=http://schema.org/BlogPosting><div class=meta><span class=key>published on</span>
<span class=val><time itemprop=datePublished datetime=2011-01-08>January 08, 2011</time></span><br><span class=key>tags:</span>
<span class=val><a href=/tags/facebook>facebook</a>
<a href=/tags/mojolicious>Mojolicious</a>
<a href=/tags/oauth>oauth</a>
<a href=/tags/oauth2>oauth2</a>
<a href=/tags/perl>Perl</a></span></div><h1 class=headline itemprop=headline>Easily integrating your Mojolicious app with Facebook.</h1><section class=body itemprop=articleBody><p>Facebook has recently released a<a href=http://graph.facebook.com/> new Graph API</a>. It's a simple RESTish API, and uses the newly released OAuth2 spec for authorization. This makes it a great match for <a href=http://mojolicio.us>Mojolicious</a>, and using my new <a href=https://github.com/marcusramberg/mojolicious-plugin-oauth2>OAuth2</a> plugin (Also coming to a CPAN mirror near you), it's absolutely trivial.</p><p>Here is a simple Lite example. Just register an app with facebook to get the key and secret.</p><pre>
   use Mojolicious::Lite;
   # configure the plugin
   plugin 'oauth2', facebook => {
       key => 'my-key',
       secret => 'my-secret' };

   get 'hello' => sub { 
      My $self=shift;
      #redirects the gets the token asynchronous   
   $self->get_token('facebook', callback => sub {
      my $token=shift;
      my $me=$self->client->get(
        'https://graph.facebook.com/me?access_token='.$token)->res->json;
          $self->render( text =>
            "Hello ".$me->{name} );
    });
</pre><p>As you can see, the plugin handles the request flow automatically. We then use the built in JSON parsing in the Mojolicious Client to turn the API data into structures we can work with in our application.</p><p>Updating facebook data is just as trivial, you just use post requests with the data you need to update. See http://graph.facebook.com/ for more info on that.</p><p>If you plan to run your app through a standalone daemon such as Hypnotoad (I really think you should :) It could be worth it to rewrite the last section of your app to take advantage of async operations like this:</p><pre>
  $self->client->async->get(        'https://graph.facebook.com/me?access_token='.$token, sub {
  my $me=shift->res->json;
  $self->render( text=>"Hello ".$me->{name} );
})->start;
</pre><p>The async plugin itself also supports an optional async=>1 setting to enable async fetching of the token.</p></section></article></main></div><footer><div class=container><span class=copyright>&copy; 2020 Suburban Nerd - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a></span></div></footer></body></html>