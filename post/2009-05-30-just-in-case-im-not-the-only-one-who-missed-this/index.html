<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Making (?:things|code|evil|mistakes)."><meta name=author content="Marcus Ramberg"><meta name=generator content="Hugo 0.72.0"><title>Just in case I'm not the only one who missed this. -- Suburban Nerd</title><link href=https://marcus.nordaaker.com/css/bootstrap.min.css rel=stylesheet><link href=https://marcus.nordaaker.com/css/clean-blog.min.css rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel=stylesheet type=text/css><meta property="og:title" content="Just in case I'm not the only one who missed this."><meta property="og:url" content="https://marcus.nordaaker.com/"><meta property="og:image" content="https://marcus.nordaaker.com/"></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://marcus.nordaaker.com>Suburban Nerd</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav navbar-right"><li><a href=/>Home</a></li><li><a href=/tags/>Tags</a></li><li><a href=/post/>Archives</a></li></ul></div></div></nav><header class=intro-header style="background-image:linear-gradient( rgba(0,0,0,0.5),rgba(0,0,0,0.5) ),url('https://marcus.nordaaker.com/img/post-bg.jpg')"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Just in case I'm not the only one who missed this.</h1><h2 class=subheading></h2><span class=meta>A 1 minute read,
<small>2009-05-30</small>
&minus; &#127991;
<a class=tag href=/tags/perl-dbic-sql>perl dbic sql</a></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p>Seems <a href=http://search.cpan.org/dist/DBIx-Class/>DBIx::Class</a>, the greatest Perl object-relational mapper ever, has recently added support for subqueries:</p><pre>22:04  * marcus looks at DBIC cookbook, realizes it has subquery support now. 
          *head explosion*
22:04 < @mst> since 081, yes :)</pre><p>Even tho most things can be rewritten as joins, this has been one of the few things I've been missing in this excellent ORM. It's still marked as experimental, but I'm totally going to be using it from now on :) Apparently this is how it works:</p><pre>
  my $s_query = $c->model('DB::License')->search({ free => 1 });
  $c->stash->{apps}= $c-model('DB::App')->search(
    { license_id => { 'IN' => $s_query->get_column('id')->as_query },
  });
</pre><p>PS. Note the disclaimers below the cookbook example.</p></div></div></div></article><hr><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:marcusramberg@gmail.com><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/marcusramberg><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/marcusramberg><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/marcusramberg><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted"><a href=https://github.com/marcusramberg/blog/>Code released under the Apache 2.0 license.</a></p></div></div></div></footer><script src=https://marcus.nordaaker.com/js/jquery.min.js></script><script src=https://marcus.nordaaker.com/js/bootstrap.min.js></script></body></html>